__author__ = 'mark'

import requests
import logging


logging.basicConfig()
logging.getLogger().setLevel(logging.DEBUG)
requests_log = logging.getLogger("requests.packages.urllib3")
requests_log.setLevel(logging.DEBUG)
requests_log.propagate = True

#form = { 'j_username':'mal.reynolds', 'j_password':'testing','redirectUrl':'http://localhost/saml'}
form = { 'grant_type':'assertion', 'assertion_type':'urn:oasis:names:tc:SAML:2.0:profiles:SSO:browser'}
form['assertion'] = 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHNhbWwycDpSZXNwb25zZSBEZXN0aW5hdGlvbj0iaHR0cHM6Ly9wYXJ0bmVyY2VudGVyLmZvcmNlLmNvbS9sb2dpbi8/c2FtbD1NZ29UeDc4YUVQbWlIQWxVc1lhSU4yaGRwZUdnT3VoNjJ0c3BjZ0FLUWZacGFrYjkxYWlmVHpWakl4IiBJRD0iXzAyOWNiNDg4NjlhMTM3M2JmMmY2YWY4YzY2N2M1ZmI4IiBJc3N1ZUluc3RhbnQ9IjIwMTUtMDYtMjdUMDA6NDU6MTcuODA5WiIgVmVyc2lvbj0iMi4wIiB4bWxuczpzYW1sMnA9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpwcm90b2NvbCI+PHNhbWwyOklzc3VlciBGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpuYW1laWQtZm9ybWF0OmVudGl0eSIgeG1sbnM6c2FtbDI9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphc3NlcnRpb24iPmh0dHBzOi8vd3d3LnJlZGhhdC5jb20vaWRwL3NoaWJib2xldGg8L3NhbWwyOklzc3Vlcj48c2FtbDJwOlN0YXR1cz48c2FtbDJwOlN0YXR1c0NvZGUgVmFsdWU9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpzdGF0dXM6U3VjY2VzcyIvPjwvc2FtbDJwOlN0YXR1cz48c2FtbDI6QXNzZXJ0aW9uIElEPSJfNzgyMDIwNDdkMWY3OTI5YTk2YmNmZTRiODJlMWIxM2UiIElzc3VlSW5zdGFudD0iMjAxNS0wNi0yN1QwMDo0NToxNy44MDlaIiBWZXJzaW9uPSIyLjAiIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIiB4bWxuczp4cz0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEiPjxzYW1sMjpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiPmh0dHBzOi8vd3d3LnJlZGhhdC5jb20vaWRwL3NoaWJib2xldGg8L3NhbWwyOklzc3Vlcj48ZHM6U2lnbmF0dXJlIHhtbG5zOmRzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjIj48ZHM6U2lnbmVkSW5mbz48ZHM6Q2Fub25pY2FsaXphdGlvbk1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuIyIvPjxkczpTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjcnNhLXNoYTEiLz48ZHM6UmVmZXJlbmNlIFVSST0iI183ODIwMjA0N2QxZjc5MjlhOTZiY2ZlNGI4MmUxYjEzZSI+PGRzOlRyYW5zZm9ybXM+PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNlbnZlbG9wZWQtc2lnbmF0dXJlIi8+PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuIyI+PGVjOkluY2x1c2l2ZU5hbWVzcGFjZXMgUHJlZml4TGlzdD0ieHMiIHhtbG5zOmVjPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biMiLz48L2RzOlRyYW5zZm9ybT48L2RzOlRyYW5zZm9ybXM+PGRzOkRpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNzaGExIi8+PGRzOkRpZ2VzdFZhbHVlPnRvK3RMdlc1S2NMbHh6WEFiVDNKRHdHNkRzYz08L2RzOkRpZ2VzdFZhbHVlPjwvZHM6UmVmZXJlbmNlPjwvZHM6U2lnbmVkSW5mbz48ZHM6U2lnbmF0dXJlVmFsdWU+dFpDZThXUElOU081ZHB2K3N5OTlXR0dleCtWN2xDLzVaRy9EL3I0b282WS9IRzF1TU02dUJvRGE5YXhMZDUwalpoMjNKa0RiMzZIR3N1UVBTSEpvYmd2MEZ0TnlFenFGUlV1VndQRk5wa2NOWW80TFk3ZjlwTmhBa3J1SVk1NU43RHMxYXdZc3FFbXdBOHJMREZEYi84UG1oNWc4RGp4U2dJWXJlS05xRklrPTwvZHM6U2lnbmF0dXJlVmFsdWU+PGRzOktleUluZm8+PGRzOlg1MDlEYXRhPjxkczpYNTA5Q2VydGlmaWNhdGU+TUlJRFRqQ0NBcmVnQXdJQkFnSUNBckl3RFFZSktvWklodmNOQVFFRkJRQXdnWjB4Q3pBSkJnTlZCQVlUQWxWVE1SY3dGUVlEVlFRSQpFdzVPYjNKMGFDQkRZWEp2YkdsdVlURVFNQTRHQTFVRUJ4TUhVbUZzWldsbmFERVdNQlFHQTFVRUNoTU5VbVZrSUVoaGRDd2dTVzVqCkxqRUxNQWtHQTFVRUN4TUNTVk14RmpBVUJnTlZCQU1URFZKbFpDQklZWFFnU1ZNZ1EwRXhKakFrQmdrcWhraUc5dzBCQ1FFV0YzTjUKYzJGa2JXbHVMWEprZFVCeVpXUm9ZWFF1WTI5dE1CNFhEVEV3TURVd05qRTBOVGd4TUZvWERURXlNRFV3TlRFME5UZ3hNRm93Z1pReApDekFKQmdOVkJBWVRBbFZUTVJjd0ZRWURWUVFJRXc1T2IzSjBhQ0JEWVhKdmJHbHVZVEVXTUJRR0ExVUVDaE1OVW1Wa0lFaGhkQ3dnClNXNWpMakVMTUFrR0ExVUVDeE1DU1ZNeEhEQWFCZ05WQkFNVEUzQnliMlF1YVdSd0xuSmxaR2hoZEM1amIyMHhLVEFuQmdrcWhraUcKOXcwQkNRRVdHbk41YzJGa2JXbHVMWEpvWTI5eWNFQnlaV1JvWVhRdVkyOXRNSUdmTUEwR0NTcUdTSWIzRFFFQkFRVUFBNEdOQURDQgppUUtCZ1FEckU1K3J6eTRBVlpVRTkwc2s5RnJEd2kzM24vTWpweStaamVucDdjRWRKdnREUlcyRFJ3N3lhL1NwWlFNYXdsTzZyK3phClFCbkRhdmtOc3dCRkQ3RWxVbWI3OUd6SnF2RnA5YXBqSDFaRXQvUW9OSTJPZ2I0ZzdaZzlyYllwQzRTMHgydG1XREwyTTl3TFF5cE0KeHdvU3VNUFFMRnlnOC9CbnJ0ZXZXUS8wQXdJREFRQUJvNEdqTUlHZ01Ba0dBMVVkRXdRQ01BQXdMQVlKWUlaSUFZYjRRZ0VOQkI4VwpIVTl3Wlc1VFUwd2dSMlZ1WlhKaGRHVmtJRU5sY25ScFptbGpZWFJsTUIwR0ExVWREZ1FXQkJUaGV3bkdoVjBVVUI0ZTBQdUJ2RWVqCnd6SU9jREFmQmdOVkhTTUVHREFXZ0JRTnJCbHc3UVNuWG5pci9vdW9OT3NoSnNGV05UQWxCZ05WSFJFRUhqQWNnUnB6ZVhOaFpHMXAKYmkxeWFHTnZjbkJBY21Wa2FHRjBMbU52YlRBTkJna3Foa2lHOXcwQkFRVUZBQU9CZ1FDM0k4dmNXdldRTGM1a3F1ZTNObFRUYzAzTgpjM1NVdzhFdTQrcXIrUTUxa3Zqc2MzWmQzZ2xaV3o1bG8xUkNoZ25kWWNOQTJWWFNCT1JUMCtJM3ZDWkI2VXlMU05pbTFqSFBpeDFHCkYyTEozMUVJQ3Q1cFR0cnUyUWxBMnY5dmpSU1dhOTBEVzR4R1NzaVZNNTY4QzMxbG5ESm9GblJZTnJsWXltT2gyQjdBc1E9PTwvZHM6WDUwOUNlcnRpZmljYXRlPjwvZHM6WDUwOURhdGE+PC9kczpLZXlJbmZvPjwvZHM6U2lnbmF0dXJlPjxzYW1sMjpTdWJqZWN0PjxzYW1sMjpOYW1lSUQgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDp0cmFuc2llbnQiIE5hbWVRdWFsaWZpZXI9Imh0dHBzOi8vd3d3LnJlZGhhdC5jb20vaWRwL3NoaWJib2xldGgiIFNQTmFtZVF1YWxpZmllcj0iaHR0cHM6Ly9yZWRoYXQubXkuc2FsZXNmb3JjZS5jb20iPl9iYTA3N2JlNjYxZWJkMWE0ZDA5MmEyY2MwNWY2ZjBiMzwvc2FtbDI6TmFtZUlEPjxzYW1sMjpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI+PHNhbWwyOlN1YmplY3RDb25maXJtYXRpb25EYXRhIEFkZHJlc3M9IjEwLjQuMzUuNjUiIE5vdE9uT3JBZnRlcj0iMjAxNS0wNi0yN1QwMDo1MDoxNy44MDlaIiBSZWNpcGllbnQ9Imh0dHBzOi8vcGFydG5lcmNlbnRlci5mb3JjZS5jb20vbG9naW4vP3NhbWw9TWdvVHg3OGFFUG1pSEFsVXNZYUlOMmhkcGVHZ091aDYydHNwY2dBS1FmWnBha2I5MWFpZlR6VmpJeCIvPjwvc2FtbDI6U3ViamVjdENvbmZpcm1hdGlvbj48L3NhbWwyOlN1YmplY3Q+PHNhbWwyOkNvbmRpdGlvbnMgTm90QmVmb3JlPSIyMDE1LTA2LTI3VDAwOjQ1OjE3LjgwOVoiIE5vdE9uT3JBZnRlcj0iMjAxNS0wNi0yN1QwMDo1MDoxNy44MDlaIj48c2FtbDI6QXVkaWVuY2VSZXN0cmljdGlvbj48c2FtbDI6QXVkaWVuY2U+aHR0cHM6Ly9yZWRoYXQubXkuc2FsZXNmb3JjZS5jb208L3NhbWwyOkF1ZGllbmNlPjwvc2FtbDI6QXVkaWVuY2VSZXN0cmljdGlvbj48L3NhbWwyOkNvbmRpdGlvbnM+PHNhbWwyOkF1dGhuU3RhdGVtZW50IEF1dGhuSW5zdGFudD0iMjAxNS0wNi0yN1QwMDo0NToxNy42NTVaIiBTZXNzaW9uSW5kZXg9IjRjNjI4NzRiOWQ2YjUzZmVjMWM2ZDE3MzIyYmZhOTVjNTQyOTA2Y2M2NDEyZWUxNDA5YTJkMzEwZGExYTRjNDQiPjxzYW1sMjpTdWJqZWN0TG9jYWxpdHkgQWRkcmVzcz0iMTAuNC4zNS42NSIvPjxzYW1sMjpBdXRobkNvbnRleHQ+PHNhbWwyOkF1dGhuQ29udGV4dENsYXNzUmVmPnVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphYzpjbGFzc2VzOnVuc3BlY2lmaWVkPC9zYW1sMjpBdXRobkNvbnRleHRDbGFzc1JlZj48L3NhbWwyOkF1dGhuQ29udGV4dD48L3NhbWwyOkF1dGhuU3RhdGVtZW50PjxzYW1sMjpBdHRyaWJ1dGVTdGF0ZW1lbnQ+PHNhbWwyOkF0dHJpYnV0ZSBOYW1lPSJvcmdhbml6YXRpb25faWQiIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6dXJpIj48c2FtbDI6QXR0cmlidXRlVmFsdWUgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeHNpOnR5cGU9InhzOnN0cmluZyI+MDBEMzAwMDAwMDAwYm42PC9zYW1sMjpBdHRyaWJ1dGVWYWx1ZT48L3NhbWwyOkF0dHJpYnV0ZT48c2FtbDI6QXR0cmlidXRlIE5hbWU9InBvcnRhbF9pZCIgTmFtZUZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmF0dHJuYW1lLWZvcm1hdDp1cmkiPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZSB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIiB4c2k6dHlwZT0ieHM6c3RyaW5nIj4wNjA2MDAwMDAwMEQwYWY8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjxzYW1sMjpBdHRyaWJ1dGUgTmFtZT0iUkVESEFUX0xPR0lOIiBOYW1lRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXR0cm5hbWUtZm9ybWF0OnVyaSI+PHNhbWwyOkF0dHJpYnV0ZVZhbHVlIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTp0eXBlPSJ4czpzdHJpbmciPlRFU1RPTkJOQVJFUzwvc2FtbDI6QXR0cmlidXRlVmFsdWU+PC9zYW1sMjpBdHRyaWJ1dGU+PC9zYW1sMjpBdHRyaWJ1dGVTdGF0ZW1lbnQ+PC9zYW1sMjpBc3NlcnRpb24+PC9zYW1sMnA6UmVzcG9uc2U+'
headers = {'Content-Type':'application/x-www-form-urlencoded'}
rsp = requests.post('https://login.salesforce.com/services/oauth2/token?saml=MgoTx78aEPmiHAlUsYaIN2hdpeGgOuh62tspcgAKQfZpakb91aifTzVjIx', headers=headers, data=form)
print(rsp.text)

#rsp = requests.post('https://idp.deviam.redhat.com/idp/authUser', headers=headers, params=form, verify=False)
#print(rsp.text)

#form = {'SAMLRequest':'PHNhbWwycDpBdXRoblJlcXVlc3QgeG1sbnM6c2FtbDJwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIEFzc2VydGlvbkNvbnN1bWVyU2VydmljZVVSTD0iaHR0cHM6Ly9hbXMtZGV2Mi5kZXZsYWIucmVkaGF0LmNvbS93YXBwcy9zc28vY29uc3VtZS5odG1sIiBEZXN0aW5hdGlvbj0iaHR0cHM6Ly9pZHAuZGV2Mi5yZWRoYXQuY29tL2lkcC8iIElEPSJfMmRjMjQ4YzQtNThmNC00NDJhLWIzNmQtZDM4ZDc1YjZkODI1IiBJc3N1ZUluc3RhbnQ9IjIwMTUtMDYtMTlUMTg6NTE6MzkuNzM5WiIgVmVyc2lvbj0iMi4wIj48c2FtbDI6SXNzdWVyIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj5odHRwczovL2Ftcy1kZXYyLmRldmxhYi5yZWRoYXQuY29tL3dhcHBzL3Nzby88L3NhbWwyOklzc3Vlcj48c2FtbDJwOk5hbWVJRFBvbGljeSBBbGxvd0NyZWF0ZT0idHJ1ZSIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDp0cmFuc2llbnQiLz48L3NhbWwycDpBdXRoblJlcXVlc3Q++PHNhbWwycDpOYW1lSURQb2xpY3kgQWxsb3dDcmVhdGU9InRydWUiIEZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOm5hbWVpZC1mb3JtYXQ6dHJhbnNpZW50Ii8+PC9zYW1sMnA6QXV0aG5SZXF1ZXN0Pgo=', 'RelayState':'testing'}
#rsp = requests.post('https://idp.dev2.redhat.com/idp/', verify=False, params=form)
#print(rsp.text)
